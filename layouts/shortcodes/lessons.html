{{/* lessons.html â€” renders a grid of lesson cards with buttons */}}
{{- $page := .Page -}}
{{- $lessons := $page.Params.lessons | default (slice) -}}

{{- if gt (len $lessons) 0 -}}
  <section class="unit-grid">
    {{- range $lessons -}}
      {{- $code := .code -}}
      {{- $title := .title | default $code -}}
      {{- $summary := .summary -}}

      {{/* UPDATE: Use a wildcard (*) after $code to match file names 
      like Lesson_1_PAI 724_Fall 2022_Lesson_1-Lab.pptx 
      */}}
      {{- $slides := $page.Resources.GetMatch (printf "%s*-Lab.*" $code) -}}
      {{- $nb     := $page.Resources.GetMatch (printf "%s*-notebook*" $code) -}}

      <article class="unit-card">
        <h3 class="unit-title">{{ $title }}</h3>
        {{- with $summary }}<p class="unit-summary">{{ . }}</p>{{ end }}

        <div class="unit-buttons">
          {{- if $slides -}}
            <a class="button" href="{{ $slides.RelPermalink }}" download>Slides (PDF/PPTX)</a>
          {{- end -}}
          {{- if $nb -}}
            <a class="button secondary" href="{{ $nb.RelPermalink }}" download>Notebook (.ipynb)</a>
          {{- end -}}
          {{- if and (not $slides) (not $nb) -}}
            <span class="button disabled" title="No files uploaded yet">Files coming soon</span>
          {{- end -}}
        </div>
      </article>
    {{- end -}}
  </section>
{{- else -}}
  <p><em>No lessons listed yet.</em></p>
{{- end -}}